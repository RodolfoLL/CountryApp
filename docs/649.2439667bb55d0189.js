"use strict";(self.webpackChunkcountryApp=self.webpackChunkcountryApp||[]).push([[649],{8649:(Tt,x,r)=>{r.r(x),r.d(x,{CountriesModule:()=>bt});var c=r(6814),p=r(4064),t=r(4946),b=r(6306),Z=r(2096),u=r(9397),U=r(7398),P=r(7394);class J extends P.w0{constructor(o,e){super()}schedule(o,e=0){return this}}const d={setInterval(n,o,...e){const{delegate:i}=d;return i?.setInterval?i.setInterval(n,o,...e):setInterval(n,o,...e)},clearInterval(n){const{delegate:o}=d;return(o?.clearInterval||clearInterval)(n)},delegate:void 0};var L=r(9039);const T={now:()=>(T.delegate||Date).now(),delegate:void 0};class g{constructor(o,e=g.now){this.schedulerActionCtor=o,this.now=e}schedule(o,e=0,i){return new this.schedulerActionCtor(this,o).schedule(i,e)}}g.now=T.now;const v=new class O extends g{constructor(o,e=g.now){super(o,e),this.actions=[],this._active=!1}flush(o){const{actions:e}=this;if(this._active)return void e.push(o);let i;this._active=!0;do{if(i=o.execute(o.state,o.delay))break}while(o=e.shift());if(this._active=!1,i){for(;o=e.shift();)o.unsubscribe();throw i}}}(class N extends J{constructor(o,e){super(o,e),this.scheduler=o,this.work=e,this.pending=!1}schedule(o,e=0){var i;if(this.closed)return this;this.state=o;const s=this.id,a=this.scheduler;return null!=s&&(this.id=this.recycleAsyncId(a,s,e)),this.pending=!0,this.delay=e,this.id=null!==(i=this.id)&&void 0!==i?i:this.requestAsyncId(a,this.id,e),this}requestAsyncId(o,e,i=0){return d.setInterval(o.flush.bind(o,this),i)}recycleAsyncId(o,e,i=0){if(null!=i&&this.delay===i&&!1===this.pending)return e;null!=e&&d.clearInterval(e)}execute(o,e){if(this.closed)return new Error("executing a cancelled action");this.pending=!1;const i=this._execute(o,e);if(i)return i;!1===this.pending&&null!=this.id&&(this.id=this.recycleAsyncId(this.scheduler,this.id,null))}_execute(o,e){let s,i=!1;try{this.work(o)}catch(a){i=!0,s=a||new Error("Scheduled action threw falsy error")}if(i)return this.unsubscribe(),s}unsubscribe(){if(!this.closed){const{id:o,scheduler:e}=this,{actions:i}=e;this.work=this.state=this.scheduler=null,this.pending=!1,(0,L.P)(i,this),null!=o&&(this.id=this.recycleAsyncId(e,o,null)),this.delay=null,super.unsubscribe()}}}),V=v;var R=r(5211),A=r(8180),_=r(9360),S=r(8251),q=r(2420),Q=r(975),z=r(1631),Y=r(4829);function I(n,o){return o?e=>(0,R.z)(o.pipe((0,A.q)(1),function F(){return(0,_.e)((n,o)=>{n.subscribe((0,S.x)(o,q.Z))})}()),e.pipe(I(n))):(0,z.z)((e,i)=>(0,Y.Xf)(n(e,i)).pipe((0,A.q)(1),(0,Q.h)(e)))}var D=r(5592),$=r(671);var K=r(9862);let y=(()=>{class n{constructor(e){this.http=e,this.apiUrl="https://restcountries.com/v3.1",this.cacheStore={byCapital:{term:"",countries:[]},byCountry:{term:"",countries:[]},byRegion:{region:"",countries:[]}},this.loadLocalStorage()}savedLocalStorage(){localStorage.setItem("cacheStore",JSON.stringify(this.cacheStore))}loadLocalStorage(){localStorage.getItem("cacheStore")&&(this.cacheStore=JSON.parse(localStorage.getItem("cacheStore")))}getCountries(e){return this.http.get(e).pipe((0,b.K)(()=>(0,Z.of)([])))}searchCapital(e){return this.getCountries(`${this.apiUrl}/capital/${e}`).pipe((0,u.b)(s=>this.cacheStore.byCapital={term:e,countries:s}),(0,u.b)(()=>this.savedLocalStorage()))}searchRegion(e){return this.getCountries(`${this.apiUrl}/region/${e}`).pipe((0,u.b)(s=>this.cacheStore.byRegion={region:e,countries:s}),(0,u.b)(()=>this.savedLocalStorage()))}searchCountry(e){return this.getCountries(`${this.apiUrl}/name/${e}`).pipe((0,u.b)(s=>this.cacheStore.byCountry={term:e,countries:s}),(0,u.b)(()=>this.savedLocalStorage()))}searchByAlphaCode(e){return this.http.get(`${this.apiUrl}/alpha/${e}`).pipe((0,U.U)(i=>i.length>0?i[0]:null),(0,b.K)(()=>(0,Z.of)(null)),function E(n,o=v){const e=function j(n=0,o,e=V){let i=-1;return null!=o&&((0,$.K)(o)?e=o:i=o),new D.y(s=>{let a=function M(n){return n instanceof Date&&!isNaN(n)}(n)?+n-e.now():n;a<0&&(a=0);let l=0;return e.schedule(function(){s.closed||(s.next(l++),0<=i?this.schedule(void 0,i):s.complete())},a)})}(n,o);return I(()=>e)}(500))}static#t=this.\u0275fac=function(i){return new(i||n)(t.LFG(K.eN))};static#e=this.\u0275prov=t.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();var X=r(8645);let w=(()=>{class n{constructor(){this.onDebounce=new X.x,this.placeholder="",this.initialValue="",this.onValue=new t.vpe,this.onDebouncer=new t.vpe}ngOnInit(){this.subscriptionDebounce=this.onDebounce.pipe(function H(n,o=v){return(0,_.e)((e,i)=>{let s=null,a=null,l=null;const m=()=>{if(s){s.unsubscribe(),s=null;const h=a;a=null,i.next(h)}};function Zt(){const h=l+n,B=o.now();if(B<h)return s=this.schedule(void 0,h-B),void i.add(s);m()}e.subscribe((0,S.x)(i,h=>{a=h,l=o.now(),s||(s=o.schedule(Zt,n),i.add(s))},()=>{m(),i.complete()},void 0,()=>{a=s=null}))})}(400)).subscribe(e=>{this.onDebouncer.emit(e)})}ngOnDestroy(){this.subscriptionDebounce?.unsubscribe()}onKeyPress(e){this.onDebounce.next(e),console.log("debounce value:",e)}static#t=this.\u0275fac=function(i){return new(i||n)};static#e=this.\u0275cmp=t.Xpm({type:n,selectors:[["shared-search-box"]],inputs:{placeholder:"placeholder",initialValue:"initialValue"},outputs:{onValue:"onValue",onDebouncer:"onDebouncer"},decls:2,vars:2,consts:[["type","text",1,"form-control",3,"placeholder","value","keyup"],["txtInput",""]],template:function(i,s){if(1&i){const a=t.EpF();t.TgZ(0,"input",0,1),t.NdJ("keyup",function(){t.CHM(a);const m=t.MAs(1);return t.KtG(s.onKeyPress(m.value))}),t.qZA()}2&i&&t.Q6J("placeholder",s.placeholder)("value",s.initialValue)}})}return n})(),f=(()=>{class n{static#t=this.\u0275fac=function(i){return new(i||n)};static#e=this.\u0275cmp=t.Xpm({type:n,selectors:[["shared-lazy-search"]],decls:2,vars:0,consts:[[1,"d-flex","justify-content-center","align-content-center"],["src","assets/loader.svg","height","35","width","35",1,"lazy-image"]],template:function(i,s){1&i&&(t.TgZ(0,"div",0),t._UZ(1,"img",1),t.qZA())},styles:[".lazy-image[_ngcontent-%COMP%]{width:250px;height:250px}"]})}return n})();const k=function(n){return["/countries/by",n]};function G(n,o){if(1&n&&(t.TgZ(0,"tr")(1,"td"),t._uU(2),t.qZA(),t.TgZ(3,"td"),t._UZ(4,"img",4),t.qZA(),t.TgZ(5,"td"),t._uU(6),t.qZA(),t.TgZ(7,"td"),t._uU(8),t.qZA(),t.TgZ(9,"td"),t._uU(10),t.ALo(11,"number"),t.qZA(),t.TgZ(12,"td")(13,"a",5),t._uU(14,"ver mas"),t.qZA()()()),2&n){const e=o.$implicit,i=o.index;t.xp6(2),t.Oqu(i+1),t.xp6(2),t.Q6J("src",e.flags.svg,t.LSH)("alt",e.name.common),t.xp6(2),t.Oqu(e.name.common),t.xp6(2),t.Oqu(e.capital),t.xp6(2),t.Oqu(t.lcZ(11,7,e.population)),t.xp6(3),t.Q6J("routerLink",t.VKq(9,k,e.cca3))}}function W(n,o){if(1&n&&(t.TgZ(0,"table",1)(1,"thead")(2,"tr")(3,"th",2),t._uU(4,"#"),t.qZA(),t.TgZ(5,"th",2),t._uU(6,"Bandera"),t.qZA(),t.TgZ(7,"th",2),t._uU(8,"Nombre"),t.qZA(),t.TgZ(9,"th",2),t._uU(10,"Capital"),t.qZA(),t.TgZ(11,"th",2),t._uU(12,"Poblacion"),t.qZA(),t._UZ(13,"th"),t.qZA()(),t.TgZ(14,"tbody"),t.YNc(15,G,15,11,"tr",3),t.qZA()()),2&n){const e=t.oxw();t.xp6(15),t.Q6J("ngForOf",e.countries)}}let C=(()=>{class n{constructor(){this.countries=[],this.region=!1}static#t=this.\u0275fac=function(i){return new(i||n)};static#e=this.\u0275cmp=t.Xpm({type:n,selectors:[["countries-country-table"]],inputs:{countries:"countries",region:"region"},decls:1,vars:1,consts:[["class","table table-dark",4,"ngIf"],[1,"table","table-dark"],["scope","col"],[4,"ngFor","ngForOf"],["width","32","height","32",3,"src","alt"],[3,"routerLink"]],template:function(i,s){1&i&&t.YNc(0,W,16,1,"table",0),2&i&&t.Q6J("ngIf",s.countries.length>0)},dependencies:[c.sg,c.O5,p.rH,c.JJ]})}return n})();function tt(n,o){1&n&&(t.TgZ(0,"div",9),t._uU(1," No hay paises con esa capital. "),t.qZA())}function et(n,o){1&n&&t._UZ(0,"shared-lazy-search")}function nt(n,o){if(1&n&&t._UZ(0,"countries-country-table",10),2&n){const e=t.oxw();t.Q6J("countries",e.countriesByCapital)}}let it=(()=>{class n{constructor(e){this.ServiceCountries=e,this.countriesByCapital=[],this.isLoading=!1,this.initialValue=""}ngOnInit(){this.countriesByCapital=this.ServiceCountries.cacheStore.byCapital.countries,this.initialValue=this.ServiceCountries.cacheStore.byCapital.term}searchValue(e){this.isLoading=!0,this.ServiceCountries.searchCapital(e).subscribe(i=>(this.countriesByCapital=i,this.isLoading=!1))}static#t=this.\u0275fac=function(i){return new(i||n)(t.Y36(y))};static#e=this.\u0275cmp=t.Xpm({type:n,selectors:[["countries-by-capital-page"]],decls:11,vars:4,consts:[[1,"text-white"],[1,"row"],[1,"col"],["placeholder","Buscar por capital",3,"initialValue","onDebouncer"],[1,"row","mt-3"],["class","col-12 alert-dark text-white text-center",4,"ngIf"],[4,"ngIf"],[1,"col","text-white"],[3,"countries",4,"ngIf"],[1,"col-12","alert-dark","text-white","text-center"],[3,"countries"]],template:function(i,s){1&i&&(t.TgZ(0,"h3",0),t._uU(1,"Por capital"),t.qZA(),t._UZ(2,"hr"),t.TgZ(3,"div",1)(4,"div",2)(5,"shared-search-box",3),t.NdJ("onDebouncer",function(l){return s.searchValue(l)}),t.qZA()()(),t.TgZ(6,"div",4),t.YNc(7,tt,2,0,"div",5),t.YNc(8,et,1,0,"shared-lazy-search",6),t.TgZ(9,"div",7),t.YNc(10,nt,1,1,"countries-country-table",8),t.qZA()()),2&i&&(t.xp6(5),t.Q6J("initialValue",s.initialValue),t.xp6(2),t.Q6J("ngIf",0===s.countriesByCapital.length&&!s.isLoading),t.xp6(1),t.Q6J("ngIf",!0===s.isLoading),t.xp6(2),t.Q6J("ngIf",!s.isLoading))},dependencies:[c.O5,w,f,C]})}return n})();const ot=function(n){return{"btn-primary":n}};function st(n,o){if(1&n){const e=t.EpF();t.TgZ(0,"button",9),t.NdJ("click",function(){const a=t.CHM(e).$implicit,l=t.oxw();return t.KtG(l.searchValue(a))}),t._uU(1),t.qZA()}if(2&n){const e=o.$implicit,i=t.oxw();t.Q6J("ngClass",t.VKq(2,ot,i.selectedRegion===e)),t.xp6(1),t.hij(" ",e," ")}}function rt(n,o){1&n&&t._UZ(0,"shared-lazy-search")}function at(n,o){1&n&&(t.TgZ(0,"div",10),t._uU(1," No hay paises con esa region. "),t.qZA())}function ct(n,o){if(1&n&&t._UZ(0,"countries-country-table",11),2&n){const e=t.oxw();t.Q6J("countries",e.countriesByRegion)("region",!0)}}let lt=(()=>{class n{constructor(e){this.ServiceCountries=e,this.countriesByRegion=[],this.isLoading=!1,this.regions=["Americas","Africa","Asia","Europe","Oceania"]}ngOnInit(){this.countriesByRegion=this.ServiceCountries.cacheStore.byRegion.countries,this.selectedRegion=this.ServiceCountries.cacheStore.byRegion.region}searchValue(e){this.selectedRegion=e,this.isLoading=!0,this.ServiceCountries.searchRegion(e).subscribe(i=>{this.countriesByRegion=i,this.isLoading=!1})}static#t=this.\u0275fac=function(i){return new(i||n)(t.Y36(y))};static#e=this.\u0275cmp=t.Xpm({type:n,selectors:[["countries-by-region-page"]],decls:12,vars:4,consts:[[1,"text-white"],[1,"row"],[1,"col","text-center"],["class","btn mx-2 text-white",3,"ngClass","click",4,"ngFor","ngForOf"],[1,"row","mt-3"],[1,"col","text-white"],[4,"ngIf"],["class","col-12 alert-dark text-white text-center",4,"ngIf"],[3,"countries","region",4,"ngIf"],[1,"btn","mx-2","text-white",3,"ngClass","click"],[1,"col-12","alert-dark","text-white","text-center"],[3,"countries","region"]],template:function(i,s){1&i&&(t.TgZ(0,"h3",0),t._uU(1,"Por Region"),t.qZA(),t._UZ(2,"hr"),t.TgZ(3,"div",1)(4,"div",1)(5,"div",2),t.YNc(6,st,2,4,"button",3),t.qZA()()(),t.TgZ(7,"div",4)(8,"div",5),t.YNc(9,rt,1,0,"shared-lazy-search",6),t.YNc(10,at,2,0,"div",7),t.YNc(11,ct,1,2,"countries-country-table",8),t.qZA()()),2&i&&(t.xp6(6),t.Q6J("ngForOf",s.regions),t.xp6(3),t.Q6J("ngIf",s.isLoading),t.xp6(1),t.Q6J("ngIf",0===s.countriesByRegion.length&&!s.isLoading),t.xp6(1),t.Q6J("ngIf",!s.isLoading))},dependencies:[c.mk,c.sg,c.O5,f,C]})}return n})();function ut(n,o){1&n&&t._UZ(0,"shared-lazy-search")}function ht(n,o){1&n&&(t.TgZ(0,"div",9),t._uU(1," No existen paises. "),t.qZA())}function pt(n,o){if(1&n&&t._UZ(0,"countries-country-table",10),2&n){const e=t.oxw();t.Q6J("countries",e.countryByName)}}let gt=(()=>{class n{constructor(e){this.ServiceCountries=e,this.countryByName=[],this.isLoading=!1,this.initialValueCountry=""}ngOnInit(){this.countryByName=this.ServiceCountries.cacheStore.byCountry.countries,this.initialValueCountry=this.ServiceCountries.cacheStore.byCountry.term}searchValue(e){this.isLoading=!0,this.ServiceCountries.searchCountry(e).subscribe(i=>{this.countryByName=i,this.isLoading=!1})}static#t=this.\u0275fac=function(i){return new(i||n)(t.Y36(y))};static#e=this.\u0275cmp=t.Xpm({type:n,selectors:[["countries-by-country-page"]],decls:11,vars:4,consts:[[1,"text-white"],[1,"row"],[1,"col"],["placeholder","Buscar por pais",3,"initialValue","onDebouncer"],[1,"row","mt-3"],[1,"col","text-white"],[4,"ngIf"],["class","col-12 alert alert-info text-center",4,"ngIf"],[3,"countries",4,"ngIf"],[1,"col-12","alert","alert-info","text-center"],[3,"countries"]],template:function(i,s){1&i&&(t.TgZ(0,"h3",0),t._uU(1,"Por Pais"),t.qZA(),t._UZ(2,"hr"),t.TgZ(3,"div",1)(4,"div",2)(5,"shared-search-box",3),t.NdJ("onDebouncer",function(l){return s.searchValue(l)}),t.qZA()()(),t.TgZ(6,"div",4)(7,"div",5),t.YNc(8,ut,1,0,"shared-lazy-search",6),t.YNc(9,ht,2,0,"div",7),t.YNc(10,pt,1,1,"countries-country-table",8),t.qZA()()),2&i&&(t.xp6(5),t.Q6J("initialValue",s.initialValueCountry),t.xp6(3),t.Q6J("ngIf",s.isLoading),t.xp6(1),t.Q6J("ngIf",0===s.countryByName.length&&!s.isLoading),t.xp6(1),t.Q6J("ngIf",!s.isLoading))},dependencies:[c.O5,w,f,C]})}return n})();var dt=r(4664);function yt(n,o){1&n&&t._UZ(0,"shared-lazy-search")}function ft(n,o){if(1&n&&(t.TgZ(0,"p"),t._uU(1),t.qZA()),2&n){const e=o.$implicit;t.xp6(1),t.hij(" ",e," ")}}function mt(n,o){if(1&n&&(t.TgZ(0,"div",2)(1,"h2"),t._uU(2),t.qZA(),t.TgZ(3,"div",3),t._UZ(4,"img",4),t.qZA(),t.TgZ(5,"div",5)(6,"ul",6)(7,"li",7)(8,"strong"),t._uU(9,"Capital: "),t.qZA(),t._uU(10),t.qZA(),t.TgZ(11,"li",7)(12,"strong"),t._uU(13,"Poblacion: "),t.qZA(),t._uU(14),t.ALo(15,"number"),t.qZA(),t.TgZ(16,"li",8)(17,"strong"),t._uU(18,"Lenguajes:"),t.qZA(),t.YNc(19,ft,2,1,"p",9),t.qZA()()()()),2&n){const e=t.oxw();t.xp6(2),t.Oqu(e.country.name.common),t.xp6(2),t.Q6J("src",e.country.flags.svg,t.LSH),t.xp6(6),t.Oqu(e.country.capital),t.xp6(4),t.hij("",t.lcZ(15,5,e.country.population)," habitantes"),t.xp6(5),t.Q6J("ngForOf",e.vector)}}const vt=[{path:"by-capital",component:it},{path:"by-region",component:lt},{path:"by-country",component:gt},{path:"by/:id",component:(()=>{class n{constructor(e,i,s){this.activatedRoute=e,this.ServiceCountries=i,this.route=s,this.country=null,this.vector=[],this.languages={}}ngOnInit(){this.activatedRoute.params.pipe((0,dt.w)(({id:e})=>this.ServiceCountries.searchByAlphaCode(e))).subscribe(e=>{e||this.route.navigateByUrl(""),this.country=e,console.log(e),this.languages=this.country?.languages,this.vector=Object.values(this.languages),console.log(this.vector)})}static#t=this.\u0275fac=function(i){return new(i||n)(t.Y36(p.gz),t.Y36(y),t.Y36(p.F0))};static#e=this.\u0275cmp=t.Xpm({type:n,selectors:[["app-country-page"]],decls:3,vars:2,consts:[["loading",""],["class","d-flex row text-light",4,"ngIf","ngIfElse"],[1,"d-flex","row","text-light"],[1,"col-4"],["alt","",1,"img-thumbnail",3,"src"],[1,"col"],[1,"list-group"],[1,"list-group-item"],[1,"list-group-item","d-flex","gap-1"],[4,"ngFor","ngForOf"]],template:function(i,s){if(1&i&&(t.YNc(0,yt,1,0,"ng-template",null,0,t.W1O),t.YNc(2,mt,20,7,"div",1)),2&i){const a=t.MAs(1);t.xp6(2),t.Q6J("ngIf",s.country)("ngIfElse",a)}},dependencies:[c.sg,c.O5,f,c.JJ]})}return n})()},{path:"**",redirectTo:"by-capital"}];let Ct=(()=>{class n{static#t=this.\u0275fac=function(i){return new(i||n)};static#e=this.\u0275mod=t.oAB({type:n});static#n=this.\u0275inj=t.cJS({imports:[p.Bz.forChild(vt),p.Bz]})}return n})();var xt=r(6208);let bt=(()=>{class n{static#t=this.\u0275fac=function(i){return new(i||n)};static#e=this.\u0275mod=t.oAB({type:n});static#n=this.\u0275inj=t.cJS({imports:[c.ez,Ct,xt.m]})}return n})()}}]);